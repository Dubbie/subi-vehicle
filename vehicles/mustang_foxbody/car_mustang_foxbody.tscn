[gd_scene load_steps=8 format=3 uid="uid://c5r6l4lf0mfgb"]

[ext_resource type="PackedScene" uid="uid://bmrx0ppni2eb5" path="res://vehicles/_base/base_vehicle.tscn" id="1_6hiwo"]
[ext_resource type="PackedScene" uid="uid://dtdajfcwcppfs" path="res://vehicles/mustang_foxbody/assets/foxbody.glb" id="2_ek8dh"]
[ext_resource type="Script" uid="uid://hgrcvwrnhy3a" path="res://src/vehicle/tire_models/brush_tire_model.gd" id="2_f4vgx"]

[sub_resource type="Curve" id="Curve_ek8dh"]
_limits = [0.0, 373.0, 0.0, 6000.0]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(800, 270), 0.0471063, 0.0471063, 0, 0, Vector2(2400, 373), 0.0, 0.0, 0, 0, Vector2(4200, 343), -0.0363093, -0.0363093, 0, 0, Vector2(5900, 250), -0.0668196, 0.0, 0, 0]
point_count = 5

[sub_resource type="Resource" id="Resource_uy6w1"]
script = ExtResource("2_f4vgx")
peak_longitudinal_mu = 1.05
peak_lateral_mu = 0.98
sliding_longitudinal_mu = 0.75
sliding_lateral_mu = 0.7
peak_lon_slip_ratio = 0.11
peak_lat_slip_angle_deg = 7.0
lon_curve_sharpness = 1.8
lat_curve_sharpness = 1.6
optimal_load = 4000.0
load_sensitivity = 0.25
friction_circle_shape = 1.1
combined_slip_falloff = 0.4
relaxation_length = 0.18
min_relaxation_speed = 1.0
metadata/_custom_type_script = "uid://hgrcvwrnhy3a"

[sub_resource type="Resource" id="Resource_mycra"]
script = ExtResource("2_f4vgx")
peak_longitudinal_mu = 1.05
peak_lateral_mu = 0.98
sliding_longitudinal_mu = 0.75
sliding_lateral_mu = 0.7
peak_lon_slip_ratio = 0.11
peak_lat_slip_angle_deg = 7.0
lon_curve_sharpness = 1.8
lat_curve_sharpness = 1.6
optimal_load = 4000.0
load_sensitivity = 0.25
friction_circle_shape = 1.1
combined_slip_falloff = 0.4
relaxation_length = 0.18
min_relaxation_speed = 1.0
metadata/_custom_type_script = "uid://hgrcvwrnhy3a"

[sub_resource type="BoxShape3D" id="BoxShape3D_f4vgx"]
size = Vector3(1.67114, 1.16869, 4.25281)

[node name="CarMustangFoxbody" instance=ExtResource("1_6hiwo")]
mass = 1426.0
max_steer_angle = 45.0

[node name="DrivetrainController" parent="Components" index="2"]
torque_curve = SubResource("Curve_ek8dh")
engine_max_rpm = 5900.0
gear_ratios = Array[float]([-2.95, 0.0, 2.95, 1.94, 1.34, 1.0, 0.68])
upshift_rpm = 5500.0
downshift_rpm = 3000.0
clutch_torque_capacity = 407.0

[node name="ECUController" parent="Components" index="4"]
rev_limit_rpm = 5900.0
rev_resume_rpm = 5500.0

[node name="FrontAxle" parent="Axles" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.277)
z_offset = -1.277
track_width = 1.438
max_spring_length = 0.25
spring_stiffness = 45000.0
spring_bump_damping = 2500.0
spring_rebound_damping = 6250.0
ride_height_adjust = 0.01
anti_roll_stiffness = 15000.0
camber_angle_deg = -0.5
caster_angle_deg = 4.5
toe_angle_deg = 0.1
wheel_radius = 0.327
wheel_mass = 21.0
wheel_width = 0.225
tire_model = SubResource("Resource_uy6w1")

[node name="WheelFL" parent="Axles/FrontAxle" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.719, 0, 0)

[node name="CSGCylinder3D" parent="Axles/FrontAxle/WheelFL/Animation/Camber/Wheel" index="0"]
radius = 0.327
height = 0.225

[node name="WheelFR" parent="Axles/FrontAxle" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.719, 0, 0)

[node name="CSGCylinder3D" parent="Axles/FrontAxle/WheelFR/Animation/Camber/Wheel" index="0"]
radius = 0.327
height = 0.225

[node name="RearAxle" parent="Axles" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.277)
z_offset = 1.277
track_width = 1.448
diff_ratio = 3.08
max_spring_length = 0.28
spring_stiffness = 22000.0
spring_bump_damping = 1800.0
spring_rebound_damping = 4000.0
ride_height_adjust = 0.05
anti_roll_stiffness = 5000.0
camber_angle_deg = 0.0
toe_angle_deg = 0.0
lsd_power_lock_factor = 0.25
lsd_engagement_speed = 15.0
wheel_radius = 0.327
wheel_mass = 21.0
wheel_width = 0.225
tire_model = SubResource("Resource_mycra")

[node name="WheelRL" parent="Axles/RearAxle" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.724, 0, 0)

[node name="CSGCylinder3D" parent="Axles/RearAxle/WheelRL/Animation/Camber/Wheel" index="0"]
radius = 0.327
height = 0.225

[node name="WheelRR" parent="Axles/RearAxle" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.724, 0, 0)

[node name="CSGCylinder3D" parent="Axles/RearAxle/WheelRR/Animation/Camber/Wheel" index="0"]
radius = 0.327
height = 0.225

[node name="foxbody" parent="." index="4" instance=ExtResource("2_ek8dh")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, -0.481524, -2.29805)

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="6"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.295978, -0.018)
shape = SubResource("BoxShape3D_f4vgx")

[editable path="Axles/FrontAxle/WheelFL"]
[editable path="Axles/FrontAxle/WheelFR"]
[editable path="Axles/RearAxle/WheelRL"]
[editable path="Axles/RearAxle/WheelRR"]
